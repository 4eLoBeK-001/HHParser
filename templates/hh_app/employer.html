{% extends 'base.html' %}
{% block content %}

<div id="content" class="max-w-6xl mx-auto mt-12 p-6 space-y-12">


    <!-- Заголовок работодателя -->
    <div class="text-center space-y-4">
        <div class="grid grid-cols-[auto_1fr_auto] items-center mb-6">

            <!-- Кнопка назад -->
            <button
                type="button"
                onclick="window.history.back()"
                class="btn btn-outline btn-warning gap-2"
                aria-label="Назад"
            >
                <svg
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M15 19l-7-7 7-7"
                    />
                </svg>
                Назад
            </button>

            <h1 class="text-5xl font-extrabold text-orange-600">
                {{ employer.name }}
            </h1>

            <!-- Заглушка для равновеси -->
            <div></div>
        </div>

        <a href="{{ employer.url }}"
        target="_blank"
        class="inline-flex items-center gap-2 px-5 py-2
            border-2 bg-orange-600 text-white 
            hover:bg-white border-orange-600 hover:text-orange-700
            font-semibold rounded-full
            shadow-sm hover:shadow
            transition">
        Перейти на hh.ru
        </a>
    
    </div>


    <!-- Основная информация -->
    <div class="bg-orange-50 border border-orange-200 rounded-3xl p-10 shadow">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
            <div>
                <p class="text-4xl font-bold text-orange-600">{{ employer.count_vac }}</p>
                <p class="text-orange-700">Вакансий</p>
            </div>
            <div>
                <p class="text-4xl font-bold text-orange-600">{{ employer.avg_salary }} ₽</p>
                <p class="text-orange-700">Средняя зарплата</p>
            </div>
            <div>
                <p class="text-4xl font-bold text-orange-600">{{ employer.cities_count }}</p>
                <p class="text-orange-700">Городов присутствия</p>
            </div>
            <div>
                <p class="text-4xl font-bold text-orange-600">{{ employer.prof_roles_count }}</p>
                <p class="text-orange-700">Проф. ролей</p>
            </div>
        </div>
    </div>

    <!-- Доп. описание / заметка -->
    <div class="bg-gradient-to-r from-orange-600 to-orange-400 text-white p-8 rounded-3xl shadow">
        <p class="text-lg text-center max-w-4xl mx-auto">
            Ниже представлен список вакансий компании <span class="font-semibold">{{ employer.name }}</span>.
        </p>
    </div>

    <!-- Список вакансий -->
    <div class="bg-white border border-orange-200 rounded-3xl shadow-xl overflow-hidden">

        <div class="bg-gradient-to-r from-orange-500 to-orange-400 p-6">
            <h2 class="text-3xl font-bold text-white text-center">
                Все вакансии работодателя
            </h2>
        </div>

        <ul class="divide-y divide-orange-100">
            {% for vacancy in vacancies %}
                <li class="p-6 hover:bg-orange-50 transition space-y-2">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div class="flex items-center gap-6 min-w-0">

                            <span class="text-3xl font-extrabold text-orange-500 w-10 text-center shrink-0">
                                {{ forloop.counter }}
                            </span>
                            <div class="min-w-0 space-y-1">
                                    <p class="text-2xl font-bold text-gray-800 truncate max-w-xl" title="{{ vacancy.name }}">
                                        {{ vacancy.name }}
                                    </p>
                                    <div class="flex flex-wrap gap-2 mt-1">
                                        <span class="px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-700 font-medium">
                                            {{ vacancy.area }}
                                        </span>
                                        <span class="px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-700 font-medium">
                                            {{ vacancy.professional_roles.first }}
                                        </span>
                                        <span class="px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700 font-medium">
                                            {{ vacancy.work_format }}
                                        </span>
                                    </div>
                                    
                                
                            </div>

                                                    
                        </div>
                        <div class="text-left md:text-right">
                            <p class="text-xl font-bold text-orange-600">
                                {% if vacancy.salary.salary_from and vacancy.salary.salary_to %}
                                    {{ vacancy.salary.salary_from }} – {{ vacancy.salary.salary_to }} ₽
                                {% elif vacancy.salary.salary_from %}
                                    от {{ vacancy.salary.salary_from }} ₽
                                {% elif vacancy.salary.salary_to %}
                                    до {{ vacancy.salary.salary_from }} ₽
                                {% endif %}
                            </p>
                            <p class="text-sm text-gray-500">{{ vacancy.experience }}</p>
                        </div>
                    </div>
                </li>
            {% empty %}
                <li class="p-10 text-center text-gray-500">
                    У данного работодателя пока нет активных вакансий.
                </li>
            {% endfor %}
        </ul>
    </div>


</div>

{% endblock content %}
